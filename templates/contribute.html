{% extends "page_template.html" %}

{% import 'macros/analytics.html' as analytics %}

{% block meta_page_title %}Contribute | {% endblock meta_page_title %}
{% block pagescript %}
    <style>
        #page_sub_nav { display: none; }
        #public #container #form1 #header {display: none; }

        #donate-by-mail { clear: both; }
        #donate-by-mail span { font-size: 12px;; }
    </style>
{% endblock pagescript %}
{% block pagecontent %}
<article id="contribute">
    <div class="col1 sixty-forty">
        <div id="translation">
        <h2 class="section-headline">Help us translate</h2>
        <table><tr><td style="width:450px;">
        <h4 class="pulls">Create Subtitles</h4>
        <p class="pulled">
        You can help us subtitle any video on Khan Academy
        <form target="_blank" id ="subtitle" method="GET" action="http://khan-report.appspot.com/translations/subtitleactions">
            Pick a language:
            <small><a href="http://khan-report.appspot.com/translations/subtitlestatus">(Full list)</a></small>
            <select id="language-id" name="language">
            </select>
            <input id="playlist-id" name="playlist" value="all" type="hidden" />
            <input id="random-id" name="random" value="1" type="hidden" />
            <input id="subtitle-submit" type="submit" value="Subtitle Now" />
        </form>
        <p>
        You can also go to any video on the Khan Academy site, click on the subtitles button on the bottom right, use the universal subitles tool to select a language
        </p>
        <script>
            var chart
            var languages = []
            var subtitled = []
            var subtitled_last_week = []
            var bar_color = []
            var bar_color = []

            var sort_language_list = function(selectId) {
                $(selectId).html($(selectId + " option").sort(function(a, b) {
                    return a.text == b.text ? 0 : a.text < b.text ? -1 : 1
                }))
            }

            $.ajax({
                type: 'GET',
                url: 'http://khan-report.appspot.com/translations/getsubtitlelanguagescount',
                dataType: 'jsonp',
                success: function(l) {
                    $.each(l, function(i) {
                        $("#language-id").append($("<option />").val(l[i].language).text(l[i].language))
                        if (l[i].chart == true) {
                            languages.push('<a href="http://khan-report.appspot.com/translations/subtitlestatus?display=1&playlist=all&language=' + l[i].language + '">' + l[i].language + '</a>')
                            subtitled.push(l[i].translated_videos)
                            subtitled_last_week.push(l[i].last_week)
                            if (l[i].last_week > 1) {
                                bar_color.push("#3E7F57")
                            } else {
                                bar_color.push("#CCFFCC")
                            }
                        }
                    });

                    sort_language_list("#language-id")
                    $("#language-id").val('Spanish')

                    var tmp_color = bar_color
                    bar_color = []
                    for (var i = 0; i< tmp_color.length; i++) {
                        bar_color.push("#FFFFFF")
                    }
                    for (var i = 0; i< tmp_color.length; i++) {
                        bar_color.push(tmp_color[i])
                    }

                    Highcharts.setOptions({
                        colors: bar_color,
                    });

                    chart = new Highcharts.Chart({
                        chart : {
                            renderTo: 'highchart-subtitle',
                            defaultSeriesType: 'bar'
                        },
                        credits: {
                            enabled: false
                        },
                        title: {
                            text: 'Languages with most subtitles'
                        },
                        colors: bar_color,
                        plotOptions: {
                            bar: {
                                stacking: 'normal',
                                colorByPoint: true,
                                pointWidth: 23,
                                borderWidth: 0,
                                shadow: false,
                                dataLabels: {
                                    enabled: true,
                                    color: "#FFFFFF",
                                    align: 'right',
                                    x: -2,
                                    y: 5,
                                    formatter: function() {
                                        var dlabel = ""
                                        if (this.series.name == 'Subtitled videos') {
                                            incremental = this.total - this.y
                                            if (incremental > 1) {
                                                dlabel = '+' + incremental
                                            }
                                            else {
                                                dlabel = ''
                                            }
                                        }
                                        else {
                                            dlabel = ''
                                        }

                                        return dlabel
                                    },
                                    style: {
                                        fontweight: 'bold',
                                        fontSize: '12'
                                    }
                                }
                            }
                        },
                        xAxis: {
                            categories: languages,
                            labels: {
                                style: {
                                    color: "#88AA11",
                                    fontWeight: 'bold'
                                }
                            },
                            tickColor: "#FFFFFF"
                        },
                        yAxis: {
                            title: {
                                text: '',
                            },
                            showLastLabel: false,
                            gridLineColor: "#FFFFFF"
                        },
                        tooltip: {
                            enabled: true,
                            formatter: function() {
                                var s
                                if (this.series.name == 'Subtitles added in the last week') {
                                    return false
                                }
                                s = '<b>' + this.x + '</b>'
                                s += '<br/>' + this.series.name + ': ' + this.y

                                return s
                            },
                            style: {
                                fontSize: 10,
                                fontWeight: 'bold',
                                color: '#88AA11'
                            }
                        },
                        series: [{
                            data: subtitled_last_week,
                            name: 'Subtitles added in the last week',
                            color: '#3E7F57'
                        }, {
                            data: subtitled,
                            name: 'Subtitled videos',
                            showInLegend: false,
                            color: '#88AA11'
                        }]
                    });
                }
            });

            $("#lang-status").submit(function(e) {
                $.each($("#lang-status").children(), function() {
                    $("#language").remove()
                });
                var lang = $("#language-id").val()
                $(this).append($("<input>").attr({id:"language", name:"language", value:lang, type:"hidden"}))
            });
        </script>
        </p>
        <h4 class="pulls">Dub Videos</h4>
        <p class="pulled">
        We have dubbed videos in <a href="https://www.youtube.com/KhanAcademyLanguages">16 languages</a>. If you feel that you can dub videos, what should you do?
        </p>
        <p>
        <a href="http://khanacademy.wufoo.com/forms/m7x3p9/" onclick="window.open(this.href,  null, 'height=1295, width=680, toolbar=0, location=0, status=1, scrollbars=1, resizable=1'); return false" title="Application Form" class="simple-button action-gradient" style="display: inline-block;">Apply to become a translator</a>
        <p>
        Also join the language specific translators' groups. Send a blank email (no text in subject or body of message) to [language]-translators+subscribe@khanacademy.org <a href="https://sites.google.com/a/khanacademy.org/forge/for-translators/reference-page/translations-update">(languages list)</a>. It will be a source of information and periodic updates about the translation effort.
        </p>
        </td><td style="vertical-align:top;">
        <div id="highchart-container">
            <div id="highchart-subtitle" style="padding: 10px; width: 300px; height: 475px;"></div>
        </div>
        </td></tr></table>
        </div>
    </div>
    <div class="col2 sixty-forty">
        <h2 class="section-headline">Donate</h2>
        <p>
            <em>Help us create the world's totally free virtual school!</em> We believe 
            everyone in the world should have access to a high quality education, and 
            we are feverishly trying to do our part to make this a reality.
        </p>
        <p>
            If you think we're on to something, or Khan Academy has helped you 
            personally &mdash; we would welcome any support you can provide. Help us 
            make a difference!
        </p>

        <p class="pulls"><a id="where-money-link" href="#">Where does my money go?</a></p>
        <div id="where-money" style="display:none;">
            <p>Your money supports our people and technology, and helps us:</p>
            <ul>
            <li>Keep the site running, totally free</li>
                <li>Create more high-quality content, in more languages</li>
                <li>Develop interactive assessment exercises, to complement the video library</li>
                <li>Improve our website and create the best free, online educational experience possible </li>
                <li>Support efforts to use our technology in schools around the world</li>
                <li>Explore other ideas we have on the future of education and how 
                we think learning should be done!</li>
            </ul>
        </div>
        <script>$("#where-money-link").click(function(){$("#where-money").slideDown("fast"); return false;});</script>

        <p class="pulled" style="font-family: Georgia, serif; font-size: 13px; margin-bottom: 18px;">
            <em>We are a nonprofit (Tax ID: 26-1544963), and are totally reliant on donations 
            like yours to keep us running. Your gifts are tax-deductible where applicable. For donation questions or issues, email us at <a href="mailto:donate@khanacademy.org">donate@khanacademy.org</a>.</em>
        </p>
        <div class="col1" style="max-width: 45%; min-width: 45%;">
            <h4>One-time donation</h4>
            <p>
                <a class="google-analytics-link-track" onclick="_gaq.push(['_trackEvent', 'Click', 'Donate-Link-Paypal']);" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=2439291" >
                    <img src="https://www.paypal.com/en_US/i/btn/btn_donateCC_LG.gif">
                </a>
            </p>
        </div>
        <div class="col2" style="text-align: left;">
            <h4>Recurring donation</h4>
            <form action="https://www.paypal.com/cgi-bin/webscr" method="post" id="recurring-donations">
                <input type="hidden" name="cmd" value="_xclick-subscriptions">
                <input type="hidden" name="business" value="JBBC7SGTYUGK2">
                <input type="hidden" name="lc" value="US">
                <input type="hidden" name="item_name" value="Recurring donation to Khan Academy">
                <input type="hidden" name="no_note" value="1">
                <input type="hidden" name="no_shipping" value="2">
                <input type="hidden" name="src" value="1">
                <input type="hidden" name="p3" value="1">
                <input type="hidden" name="currency_code" value="USD">
                <input type="hidden" name="bn" value="PP-SubscriptionsBF:btn_subscribeCC_LG.gif:NonHosted">
                <input type="hidden" name="return" value="http://khanacademy.org">
                    Donate $<input type="text" name="a3" value="25" maxlength="30" style="width:45px;margin-left:2px;"> once a
                    <nobr>
                    <select name="t3" id="time-frame-select">
                    	<option value="W" data-plural="weeks">week</option>
                    	<option value="M" data-plural="months" selected>month</option>
                    	<option value="Y" data-plural="years">year</option>
                    </select>
                    for
                    <select name="srt">
                         <option value="2">2</option>
                         <option value="3">3</option>
                         <option value="4">4</option>
                         <option value="5">5</option>
                         <option value="6">6</option>
                         <option value="7">7</option>
                         <option value="8">8</option>
                         <option value="9">9</option>
                         <option value="10">10</option>
                         <option value="11">11</option>
                         <option value="12" selected>12</option>
                         <option value="24">24</option>
                         <option value="36">36</option>
                         <option value="0">Forever</option>
                     </select>
                     <span id="selected-time-frame">months</span></nobr>
                <input id="recurring-donations-submit" type="image" src="https://www.paypal.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                 <img src="/images/throbber.gif" class="throbber" style="display:none;" />
                 <img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
             </form>
             <script>
                 $("#time-frame-select").change(function() {
                     $("#selected-time-frame").html($("option:selected", this).attr("data-plural"));
                 });
             </script>
         </div>

        <div id="donate-by-mail">
            <p>
                If you'd like send us your support by mail, please use:<br>

                <span>
                    Khan Academy<br>
                    PO Box 1630<br>
                    Mountain View, CA, 94042
                </span>
            </p>
        </div>

    </div>
    <div class="clear"></div>
    <hr>
    <div class="col1 sixty-forty">
        <h2>Get the word out</h2>
        <p>
            Spreading the word about the Khan Academy is one of the best ways to help
            us. Each month we serve around 4 million students, but there's no reason it 
            shouldn't be 50 million. Please take a moment to share this site with your 
            friends and community. 
        </p>
        <p>
            <a href="http://www.facebook.com/khanacademy" class="simple-button action-gradient social-button">
                <img src="/images/social_facebook_box_blue_48.png" width=48 height=48 />
                Join us on Facebook
            </a>
            <a href="http://twitter.com/khanacademy" class="simple-button action-gradient social-button">
                <img src="/images/social_twitter_box_blue_48.png" width=48 height=48 />
                Follow us on Twitter
            </a>
        <br>
        <p>
        If you are interested in helping bring Khan Academy to a school near you,
        <a href="/toolkit">find out more</a> and ask the school leaders to
        <a href="/about/getting-started#schools">submit an application</a>
        </p>
        
    </div>
    <div class="col2 sixty-forty">
        <iframe id="meetup" src="http://www.meetup.com/everywhere/widget2/khanacademy/?width=275&height=290&usetheme=1" border="0" frameborder="0" height="290" width="100%"></iframe>
    </div>
    <div class="clear"></div>
    <hr>
    <div style="text-align:center; padding-bottom: 18px;"><p>The Khan Academy has also received the time, energy, and expertise of many <a href="/contribute/credits">volunteers and part-time contributors</a>.</p></div>
</article>
{% endblock pagecontent %}
{% block bottompagescript %}
    {{ js_css_packages.js_package("exercisestats") }}
    {{ analytics.crazyegg_tracker(False) }}
{% endblock bottompagescript %}
